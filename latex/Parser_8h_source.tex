\doxysection{Parser.\+h}
\hypertarget{Parser_8h_source}{}\label{Parser_8h_source}\index{include/parser/Parser.h@{include/parser/Parser.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ "{}ast/Ast.h"{}}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}lex/Token.h"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}util/Utilities.h"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }sammine\_lang\ \{}
\DoxyCodeLine{00009\ \textcolor{keyword}{enum}\ ParserError\ \{}
\DoxyCodeLine{00010\ \ \ SUCCESS,}
\DoxyCodeLine{00011\ \ \ COMMITTED\_NO\_MORE\_ERROR,}
\DoxyCodeLine{00012\ \ \ COMMITTED\_EMIT\_MORE\_ERROR,}
\DoxyCodeLine{00013\ \ \ NONCOMMITTED,}
\DoxyCodeLine{00014\ \};}
\DoxyCodeLine{00015\ \textcolor{keyword}{using\ namespace\ }AST;}
\DoxyCodeLine{00016\ \textcolor{keyword}{using\ namespace\ }sammine\_util;}
\DoxyCodeLine{00017\ \textcolor{keyword}{class\ }Parser\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classsammine__util_1_1Reportee}{Reportee}}\ \{}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \textcolor{keywordtype}{void}\ error(\textcolor{keyword}{const}\ std::string\ \&msg,\ \mbox{\hyperlink{classsammine__util_1_1Location}{Location}}\ loc\ =\ Location::NonPrintable())\ \{}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordflow}{if}\ (reporter.has\_value())\ \{}
\DoxyCodeLine{00021\ \ \ \ \ \ \ reporter-\/>get().immediate\_error(msg,\ loc);}
\DoxyCodeLine{00022\ \ \ \ \ \}}
\DoxyCodeLine{00023\ \ \ \ \ this-\/>error\_count++;}
\DoxyCodeLine{00024\ \ \ \}}
\DoxyCodeLine{00025\ \ \ \textcolor{keywordtype}{void}\ diag(\textcolor{keyword}{const}\ std::string\ \&msg,\ \mbox{\hyperlink{classsammine__util_1_1Location}{Location}}\ loc\ =\ Location::NonPrintable())\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keywordflow}{if}\ (reporter.has\_value())\ \{}
\DoxyCodeLine{00027\ \ \ \ \ \ \ reporter-\/>get().immediate\_diag(msg,\ loc);}
\DoxyCodeLine{00028\ \ \ \ \ \}}
\DoxyCodeLine{00029\ \ \ \}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>\ \textcolor{keyword}{using\ }p\ =\ std::pair<std::unique\_ptr<T>,\ ParserError>;}
\DoxyCodeLine{00033\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ T>\ \textcolor{keyword}{using\ }u\ =\ std::unique\_ptr<T>;}
\DoxyCodeLine{00034\ \ \ std::optional<std::reference\_wrapper<Reporter>>\ reporter;}
\DoxyCodeLine{00035\ \ \ std::shared\_ptr<TokenStream>\ tokStream;}
\DoxyCodeLine{00036\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseProgram()\ -\/>\ u<ProgramAST>;}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \textcolor{comment}{//\ Parse\ definition}}
\DoxyCodeLine{00039\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseDefinition()\ -\/>\ p<DefinitionAST>;}
\DoxyCodeLine{00040\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParsePrototype()\ -\/>\ p<PrototypeAST>;}
\DoxyCodeLine{00041\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseFuncDef()\ -\/>\ p<DefinitionAST>;}
\DoxyCodeLine{00042\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classsammine__lang_1_1Parser_ae5d006859a236f0c3d25036664f98d79}{ParseVarDef}}()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00043\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseRecordDef()\ -\/>\ p<DefinitionAST>;}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \textcolor{comment}{//\ Parse\ type}}
\DoxyCodeLine{00046\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseTypedVar()\ -\/>\ p<TypedVarAST>;}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \textcolor{comment}{//\ Parse\ pressions}}
\DoxyCodeLine{00049\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00050\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParsePrimaryExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00051\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseBinaryExpr(\textcolor{keywordtype}{int}\ prededence,\ u<ExprAST>\ LHS)}
\DoxyCodeLine{00052\ \ \ \ \ \ \ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00053\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseBoolExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseCallExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00056\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseReturnExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00057\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseArguments()}
\DoxyCodeLine{00058\ \ \ \ \ \ \ -\/>\ std::pair<std::vector<u<ExprAST>>,\ ParserError>;}
\DoxyCodeLine{00059\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseParenExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00060\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseIfExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00061\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseNumberExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00062\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseStringExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00063\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseVariableExpr()\ -\/>\ p<ExprAST>;}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \textcolor{comment}{//\ Parse\ block}}
\DoxyCodeLine{00066\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseBlock()\ -\/>\ p<BlockAST>;}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \textcolor{comment}{//\ Parse\ parameters}}
\DoxyCodeLine{00069\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ ParseParams()}
\DoxyCodeLine{00070\ \ \ \ \ \ \ -\/>\ std::pair<std::vector<u<TypedVarAST>>,\ ParserError>;}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \textcolor{comment}{//\ Utilities}}
\DoxyCodeLine{00073\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ expect(TokenType\ tokType,\ \textcolor{keywordtype}{bool}\ exhausts\ =\ \textcolor{keyword}{false},}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TokenType\ until\ =\ TokenType::TokEOF,}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::string\ \&message\ =\ \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00076\ \ \ \ \ \ \ -\/>\ std::shared\_ptr<Token>;}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ [[nodiscard]]\ Parser(}
\DoxyCodeLine{00079\ \ \ \ \ \ \ std::optional<std::reference\_wrapper<Reporter>>\ reporter\ =\ std::nullopt)}
\DoxyCodeLine{00080\ \ \ \ \ \ \ :\ reporter(reporter)\ \{\}}
\DoxyCodeLine{00081\ \ \ [[nodiscard]]\ Parser(}
\DoxyCodeLine{00082\ \ \ \ \ \ \ std::shared\_ptr<TokenStream>\ tokStream,}
\DoxyCodeLine{00083\ \ \ \ \ \ \ std::optional<std::reference\_wrapper<Reporter>>\ reporter\ =\ std::nullopt)}
\DoxyCodeLine{00084\ \ \ \ \ \ \ :\ reporter(reporter),\ tokStream(tokStream)\ \{\}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ [[nodiscard]]\ \textcolor{keyword}{auto}\ Parse()\ -\/>\ u<ProgramAST>;}
\DoxyCodeLine{00087\ \};}
\DoxyCodeLine{00088\ \}\ \textcolor{comment}{//\ namespace\ sammine\_lang}}

\end{DoxyCode}
